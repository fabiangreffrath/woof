# This script is stamped out by CMake and run by `make install`.

set(PROJECT_SOURCE_DIR "@PROJECT_SOURCE_DIR@")
set(CMAKE_CURRENT_SOURCE_DIR "@CMAKE_CURRENT_SOURCE_DIR@")
set(CMAKE_CURRENT_BINARY_DIR "@CMAKE_CURRENT_BINARY_DIR@")
set(WIN32 "@WIN32@")

set(WOOF_TEXTS "@WOOF_EXAMPLES_TEXTS@")

function(win_textfile SOURCE DESTINATION)
    if(WIN32 AND NOT CMAKE_CROSSCOMPILING)
        execute_process(COMMAND
            "${PROJECT_BINARY_DIR}/win32/win-textfile"
            "${SOURCE}" "${DESTINATION}")
    else()
        execute_process(COMMAND
            "${CMAKE_COMMAND}" -E copy
            "${SOURCE}" "${DESTINATION}" VERBATIM)
    endif()
endfunction()

if(WIN32)
    # Convert text files to a format Windows Notepad can read without issue.
    foreach(WOOF_TEXT ${WOOF_TEXTS})
        win_textfile(
            "${CMAKE_CURRENT_SOURCE_DIR}/${WOOF_TEXT}"
            "${CMAKE_CURRENT_BINARY_DIR}/${WOOF_TEXT}")
    endforeach()
endif()
